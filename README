################################################################################
#                                                                              #
#                                                                              #
#           This is a README file for the Multistrand distribution.            #
#                                                                              #
#============================================================================= #
# Copyright (c) 2010-2015 California Institute of Technology.                  #
# Distributed under the MIT License.                                           #
# (See accompanying file LICENSE or copy at                                    #
#  http://opensource.org/licenses/MIT)                                         #
#==============================================================================#
#                                                                              #
#  The authors welcome any bug reports and other comments on the software. :)  #
#                                                                              #
################################################################################

################################################################################
#                                                                              #
#                                                                              #
#  Maintainer / Primary Author / Primary Contact:                              #
#    Joseph Schaeffer (schaeffer@dna.caltech.edu)                              #
#                                                                              #
#  Contributing Authors:                                                       #
#    Chris Berlind (cberlind@dna.caltech.edu)                                  #
#    Joshua Loving (jloving@hawaii.edu)                                        #
#    Joseph Berleant (jberleant@gmail.com)                                     #
#    Chris Thachuk (thachuk@caltech.edu)                                       #
#    Erik Winfree (winfree@caltech.edu)                                        #
#                                                                              #
#                                                                              #
################################################################################

###
### Requirements
###

This package is easiest to install on a linux or Mac OSX machine, with Python version 2.6 or 2.7, and an appropriate compiler such as gcc. It can be installed on a Windows machine, but it requires some work to do and hasn't been added to the Makefile so you'll likely need to change things to get it to detect your compiler and python executables.

It is highly recommended to get the tcmalloc library from Google Perftools (https://code.google.com/p/gperftools/ ). It should be detected automatically if installed into your standard library path, and it will greatly speed up Multistrand as highly optimized memory librarys really assist the core simulation loop.

You will also need the NUPACK thermodynamic parameter files - download the NUPACK source from http://www.nupack.org and install it. Then make sure you have NUPACKHOME set in your environment when you run python/multistrand so it can find the parameter files.

###
###  Python package
###

Multistrand is now a Python package. To build the package, run the command 'make' in the root directory of this distribution (the directory you found this README in). If this is successful, you should now have a subdirectory 'multistrand/' which is the multistrand package. 

You can now do a 'make install' or 'sudo make install' to install Multistrand into your python site packages. You'll need the 'sudo' version if it complains about permissions. Now see below.

If you're having trouble, see the troubleshooting section.

###
### Using the Multistrand package
###

1. First you must import the package: if it's in your site packages or you're in the root directory, this is straightforward - skip to #2. If it's not, you need to add it to your package search path:

import sys
sys.path.append('/path/to/Multistrand')

Note that the path you should put in there is the path to your
Multistrand source directory [the path to this README file!].

2. Import the parts you need:

[Base package]
import multistrand

[Options]
from multistrand.options import Options
or
import multistrand.options   #NOTE: try dir(multistrand.options) to see the members.
                             # You can then use them via 'multistrand.options.Options', etc

[General objects (inputs to a Options object)]
from multistrand.objects import Domain, Strand, Complex, StopCondition
or
import multistrand.objects   #NOTE: try dir(multistrand.objects) to see the members.
                             # You can then use them via 'multistrand.objects.Domain', etc

[System object]
from multistrand.system import SimSystem
or 
import multistrand.system    #NOTE: try dir(multistrand.system) to see the members.
                             # You can then use them via 'multistrand.system.SimSystem', etc

Remember you can use "help(multistrand.objects.Domain)" and similar commands to get help on each object and function provided by Multistrand. 


###
### Documentation
###

You can auto-generate the documentation from the package via "make docs" from the root of this distribution. Note that you MUST have built the package already, or it cannot import and get the relevant docstrings.

This uses the sphinx package (which is also used to make the Python documentation) to create a set of html documents based on the docstrings found in the multistrand package. This may or may not be helpful, but if you see areas that need more documentation, feel free to write in with suggestions.

Once the documentation is built, it will be in doc/build/html/index.html

WARNING: Much of the Input File Format section is out of date. For better information, see the test/examples and various subdirectories: those are the files used for generating the data found in the Ph.D. thesis, so they are reasonably complete as to how things should work.

###
### Troubleshooting
###

Most installation problems have to do with the path / having the correct programs.
Python 2.6 or 2.7 is required: in general, if you can type "python --version" and get one of those two versions, everything should work. Note that if you have a "python2.6" executable, that's slightly preferred by the installer (but probably we should prefer "python"?). 

Next, you must have a usable "gcc" installed, or more generally, you need something that the installed Python can recognize as a C compiler, as all the compilation options are done via python's setup.py distribution. If you run into trouble with this step please let me know.

Finally, when importing the multistrand module in python, if it can't find it, it means you probably didn't install it as a site package, and are in the wrong directory. Try to import it when your os.getcwd() says you are in the root directory of this distribution. Note that a lot of the examples and tests in the test/ subdirectories try to automatically figure out where the package might be if it's not set up as a site package. See that code for an example of how you might do so when not using it as a site package.


